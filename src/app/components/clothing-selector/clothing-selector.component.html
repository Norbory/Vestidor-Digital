<div class="clothing-selector">
  <h2>👕 Selector de Prendas</h2>
  
  <!-- Estado de selección -->
  <div class="selection-status" *ngIf="getSelectionCount() > 0">
    <div class="status-info">
      ✅ <strong>{{ getSelectionCount() }}</strong> prenda(s) seleccionada(s)
    </div>
    <button class="clear-selection-btn" (click)="clearSelection()">
      🗑️ Limpiar selección
    </button>
  </div>

  <!-- Loading -->
  <div *ngIf="isLoading" class="loading">
    <p>Cargando prendas...</p>
  </div>
  
  <!-- Filtros -->
  <div class="filters">
    <h3>Filtros</h3>
    <div class="filter-row">
      <div class="filter-group">
        <label for="type-filter">Tipo de prenda:</label>
        <select id="type-filter" [(ngModel)]="selectedType" (change)="onFilterChange()">
          <option value="">Todos los tipos</option>
          <option *ngFor="let type of clothingTypes" [value]="type">
            {{ type | titlecase }}
          </option>
        </select>
      </div>
      
      <div class="filter-group">
        <label for="color-filter">Color:</label>
        <input 
          id="color-filter" 
          type="text" 
          [(ngModel)]="selectedColor" 
          (input)="onFilterChange()"
          placeholder="Ingresa un color">
      </div>
      
      <div class="filter-group">
        <label for="brand-filter">Marca:</label>
        <input 
          id="brand-filter" 
          type="text" 
          [(ngModel)]="selectedBrand" 
          (input)="onFilterChange()"
          placeholder="Ingresa una marca">
      </div>
      
      <button class="clear-btn" (click)="clearFilters()">Limpiar filtros</button>
    </div>
  </div>

  <!-- Lista de prendas -->
  <div class="clothing-grid" *ngIf="!isLoading">
    <div 
      *ngFor="let item of filteredItems" 
      class="clothing-card"
      [class.selected]="isItemSelected(item.id)"
      (click)="onItemSelect(item)">
      
      <div class="selection-indicator" *ngIf="isItemSelected(item.id)">
        ✅
      </div>
      
      <div class="item-image">
        <img [src]="item.imageUrl" [alt]="item.name" onerror="this.src='/assets/placeholder-clothing.jpg'">
      </div>
      <div class="item-info">
        <h4>{{ item.name }}</h4>
        <p class="brand" *ngIf="item.brand">🏷️ {{ item.brand }}</p>
        <p class="color">🎨 {{ item.color }}</p>
        <p class="type">👔 {{ item.type | titlecase }}</p>
        <p *ngIf="item.description" class="description">{{ item.description }}</p>
      </div>
      
      <div class="action-hint">
        <span *ngIf="!isItemSelected(item.id)">Click para seleccionar</span>
        <span *ngIf="isItemSelected(item.id)">Click para quitar</span>
      </div>
    </div>
  </div>

  <div *ngIf="filteredItems.length === 0 && !isLoading" class="no-results">
    <p>🔍 No se encontraron prendas con los filtros seleccionados.</p>
    <button (click)="clearFilters()" class="clear-filters-btn">Limpiar filtros</button>
  </div>

  <!-- Información adicional -->
  <div class="info-panel" *ngIf="!isLoading">
    <p>📊 <strong>{{ filteredItems.length }}</strong> prendas disponibles</p>
    <p *ngIf="getSelectionCount() > 0">
      ✨ Ve a <strong>"Vista Principal"</strong> para generar tu imagen
    </p>
  </div>
</div>
