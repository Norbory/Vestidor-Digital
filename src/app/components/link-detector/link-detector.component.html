<div class="link-detector">
  <h2>Detector de Ropa por Enlaces</h2>
  <p class="subtitle">Ingresa el enlace de una pÃ¡gina de tienda online y detectaremos automÃ¡ticamente la ropa disponible</p>

  <!-- Formulario de entrada -->
  <div class="url-input-section">
    <div class="input-group">
      <input 
        type="url" 
        [(ngModel)]="inputUrl" 
        placeholder="Ej: https://www.zara.com/es/es/camisa-popelin-p12345678.html"
        class="url-input"
        [disabled]="isAnalyzing">
      
      <button 
        (click)="analyzeUrl()" 
        [disabled]="isAnalyzing || !inputUrl.trim()"
        class="analyze-btn">
        <span *ngIf="!isAnalyzing">ğŸ” Analizar PÃ¡gina</span>
        <span *ngIf="isAnalyzing">â³ Analizando...</span>
      </button>
    </div>

    <!-- Sitios soportados -->
    <div class="supported-sites">
      <h4>ğŸŒ Sitios web soportados:</h4>
      <div class="sites-grid">
        <span *ngFor="let site of supportedSites" class="site-badge">{{ site }}</span>
      </div>
    </div>
  </div>

  <!-- Estado de anÃ¡lisis -->
  <div *ngIf="isAnalyzing" class="analyzing-state">
    <div class="spinner"></div>
    <h3>Analizando pÃ¡gina web...</h3>
    <div class="analysis-steps">
      <div class="step active">ğŸ“¥ Descargando contenido</div>
      <div class="step active">ğŸ” Detectando productos</div>
      <div class="step active">ğŸ·ï¸ Extrayendo informaciÃ³n</div>
      <div class="step">âœ… Finalizando anÃ¡lisis</div>
    </div>
  </div>

  <!-- Mensaje de error -->
  <div *ngIf="errorMessage" class="error-message">
    âŒ {{ errorMessage }}
  </div>

  <!-- Resultados detectados -->
  <div *ngIf="analysisComplete && detectedItems.length > 0" class="results-section">
    <div class="results-header">
      <h3>ğŸ¯ Prendas Detectadas ({{ detectedItems.length }})</h3>
      <button class="clear-btn" (click)="clearResults()">ğŸ—‘ï¸ Limpiar Resultados</button>
    </div>

    <div class="detected-items">
      <div *ngFor="let item of detectedItems" class="detected-card">
        <!-- Imagen del producto -->
        <div class="item-image">
          <img [src]="item.imageUrl" [alt]="item.name" 
               onerror="this.src='/assets/placeholder-clothing.jpg'">
          
          <!-- Indicador de confianza -->
          <div class="confidence-badge" 
               [style.background-color]="getConfidenceColor(item.confidence)">
            {{ (item.confidence * 100) | number:'1.0-0' }}%
          </div>
          
          <!-- Indicador de oferta -->
          <div *ngIf="item.onSale" class="sale-badge">ğŸ”¥ OFERTA</div>
        </div>

        <!-- InformaciÃ³n del producto -->
        <div class="item-details">
          <h4>{{ item.name }}</h4>
          
          <div class="item-meta">
            <span class="brand">{{ item.brand }}</span>
            <span class="type">{{ item.type | titlecase }}</span>
            <span class="color" [style.color]="item.color">â— {{ item.color }}</span>
          </div>

          <p *ngIf="item.description" class="description">{{ item.description }}</p>

          <div class="price-section" *ngIf="item.originalPrice">
            <span class="price">${{ item.originalPrice }}</span>
            <span *ngIf="item.onSale" class="sale-indicator">En oferta</span>
          </div>

          <div class="confidence-info">
            <span class="confidence-label">Confianza de detecciÃ³n:</span>
            <span class="confidence-value" [style.color]="getConfidenceColor(item.confidence)">
              {{ getConfidenceText(item.confidence) }} ({{ (item.confidence * 100) | number:'1.0-0' }}%)
            </span>
          </div>
        </div>

        <!-- Acciones -->
        <div class="item-actions">
          <button class="add-to-selector-btn" (click)="selectDetectedItem(item)">
            ğŸ‘• Usar en Selector
          </button>
          
          <button class="add-to-wardrobe-btn" (click)="addToWardrobe(item)">
            ğŸ’¾ Agregar a Guardarropa
          </button>
          
          <button class="view-original-btn" (click)="openOriginalLink(item.sourceUrl!)">
            ğŸ”— Ver Original
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Estado sin resultados -->
  <div *ngIf="analysisComplete && detectedItems.length === 0" class="no-results">
    <h3>ğŸ˜• No se detectaron prendas</h3>
    <p>No pudimos encontrar productos de ropa en esta pÃ¡gina. Intenta con:</p>
    <ul>
      <li>Una pÃ¡gina especÃ­fica de producto (no la pÃ¡gina principal)</li>
      <li>Uno de los sitios web soportados</li>
      <li>Un enlace directo a una prenda especÃ­fica</li>
    </ul>
  </div>

  <!-- InformaciÃ³n sobre la funcionalidad -->
  <div class="info-section">
    <h4>â„¹ï¸ CÃ³mo funciona el detector</h4>
    <div class="info-grid">
      <div class="info-card">
        <h5>ğŸ” DetecciÃ³n AutomÃ¡tica</h5>
        <p>Analizamos el contenido de la pÃ¡gina web para identificar productos de ropa automÃ¡ticamente.</p>
      </div>
      
      <div class="info-card">
        <h5>ğŸ·ï¸ ExtracciÃ³n de Datos</h5>
        <p>Extraemos informaciÃ³n como nombre, precio, marca, color y descripciÃ³n del producto.</p>
      </div>
      
      <div class="info-card">
        <h5>âš¡ IntegraciÃ³n RÃ¡pida</h5>
        <p>Los productos detectados se pueden agregar directamente a tu guardarropa o selector.</p>
      </div>
    </div>

    <!-- Limitaciones actuales -->
    <div class="limitations">
      <h5>âš ï¸ Limitaciones actuales (versiÃ³n demo)</h5>
      <ul>
        <li>Los resultados son simulados para demostrar la funcionalidad</li>
        <li>El anÃ¡lisis real requiere implementar web scraping o APIs de tiendas</li>
        <li>Algunos sitios pueden bloquear el acceso automatizado</li>
        <li>La detecciÃ³n con IA de imÃ¡genes estÃ¡ planificada para futuras versiones</li>
      </ul>
    </div>

    <!-- PrÃ³ximas mejoras -->
    <div class="future-features">
      <h5>ğŸš€ PrÃ³ximas mejoras</h5>
      <div class="feature-list">
        <span class="feature pending">ğŸ”„ Web scraping real</span>
        <span class="feature pending">ğŸ¤– IA de anÃ¡lisis de imÃ¡genes</span>
        <span class="feature pending">ğŸ“Š ComparaciÃ³n de precios</span>
        <span class="feature pending">ğŸ”” Alertas de ofertas</span>
        <span class="feature pending">ğŸ“± ExtensiÃ³n del navegador</span>
      </div>
    </div>
  </div>
</div>
